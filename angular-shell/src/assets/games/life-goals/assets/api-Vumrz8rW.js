const p=async t=>{const n="https://bjuat.bajajlife.com/BalicLmsUtil/whatsappInhouse",s=new URLSearchParams(window.location.search),c=s.get("userId")||"",i=s.get("gameId")||"";let r="";if(t.date){const e=new Date(t.date);if(!isNaN(e.getTime())){const o=String(e.getDate()).padStart(2,"0"),m=String(e.getMonth()+1).padStart(2,"0"),u=e.getFullYear();r=`${o}/${m}/${u}`}}const a={cust_name:t.name||t.fullName||"",mobile_no:t.mobile_no||t.contact_number||"",dob:"",gender:"M",pincode:"",email_id:t.email_id||"",life_goal_category:"",investment_amount:"",product_id:"",p_source:"Marketing Assist",p_data_source:"GAMIFICATION",pasa_amount:"",product_name:"",pasa_product:"",associated_rider:"",customer_app_product:"",p_data_medium:" GAMIFICATION ",utmSource:"",userId:c,gameID:i,remarks:t.summary_dtls||t.remarks||"Booking Request",appointment_date:r,appointment_time:t.timeSlot||t.time||""};console.log("[API] Submitting lead to WhatsApp Inhouse API:",a);try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),o=await e.json().catch(()=>({}));return{success:e.ok,data:o,error:e.ok?null:(o==null?void 0:o.message)||`API error: ${e.status}`}}catch(e){return console.error("LMS Submission Error:",e),{success:!1,error:e.message}}};export{p as submitToLMS};
